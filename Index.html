<!doctype html>
<html lang="fa">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ø¢ÙˆØ§ÛŒ Ø²Ø±ÛŒØ§Ø¨ â€” Music Academy</title>
<style>
  :root{
    --brand-navy: #13293f;   /* Ø±Ù†Ú¯ Ø§ØµÙ„ÛŒ (Ù‚Ø§Ø¨Ù„ ØªØºÛŒÛŒØ±) */
    --brand-gold:  #d0a75a;  /* Ø±Ù†Ú¯ Ø«Ø§Ù†ÙˆÛŒÙ‡ (Ù‚Ø§Ø¨Ù„ ØªØºÛŒÛŒØ±) */
    --text: #eef6fb;
    --muted: #a9c0d6;
    --glass: rgba(255,255,255,0.04);
    --radius: 14px;
  }
  /* MOBILE-FIRST STYLING */
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: "Vazirmatn", system-ui, -apple-system, "Helvetica Neue", Arial;
    background: linear-gradient(180deg, #000 0%, #010409 100%);
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    padding:16px;
  }
  .container{
    max-width:900px;
    margin:0 auto;
  }

  /* HEADER */
  header{
    display:flex;
    align-items:center;
    gap:12px;
    background: linear-gradient(90deg, rgba(19,41,63,0.96), rgba(13,22,33,0.85));
    padding:14px;
    border-radius: var(--radius);
    box-shadow: 0 6px 24px rgba(2,8,15,0.6);
  }
  #logo{
    width:74px;
    height:74px;
    object-fit:contain;
    border-radius:10px;
    background:var(--glass);
    padding:8px;
    border: 2px solid rgba(255,255,255,0.03);
  }
  .brand{
    flex:1;
    min-width:0;
  }
  .brand h1{
    margin:0;
    font-size:18px;
    letter-spacing:0.6px;
    color:var(--text);
  }
  .brand p{ margin:4px 0 0 0; color:var(--muted); font-size:13px }

  .edit-toggle{
    background: transparent;
    border:1px solid rgba(255,255,255,0.06);
    color:var(--text);
    padding:8px 10px;
    border-radius:10px;
    font-size:13px;
  }

  /* HERO */
  .hero{
    margin-top:14px;
    background: linear-gradient(180deg, rgba(19,41,63,0.85), rgba(0,0,0,0.6));
    padding:16px;
    border-radius:12px;
    display:flex;
    gap:12px;
    align-items:flex-start;
  }
  .hero-left{ flex:1; }
  .hero h2{ margin:0; color:var(--brand-gold); font-size:20px }
  .hero .lead{ margin-top:8px; color:var(--text); font-size:14px; line-height:1.5 }

  .hero-media{
    width:120px;
    height:120px;
    border-radius:10px;
    overflow:hidden;
    background:linear-gradient(180deg, rgba(0,0,0,0.2), rgba(255,255,255,0.02));
    display:flex;
    align-items:center;
    justify-content:center;
    border: 1px solid rgba(255,255,255,0.03);
  }

  /* SECTIONS */
  section.card{
    margin-top:14px;
    background:linear-gradient(180deg, rgba(3,12,23,0.6), rgba(2,6,12,0.55));
    padding:12px;
    border-radius:12px;
  }
  section.card h3{ margin:0 0 8px 0; color:var(--brand-gold); font-size:16px }
  .text-muted{ color:var(--muted); font-size:13px; line-height:1.6 }

  /* INSTRUCTOR LIST */
  .instructors{ display:flex; flex-direction:column; gap:12px }
  .instructor{
    display:flex;
    gap:10px;
    align-items:flex-start;
    padding:10px;
    border-radius:10px;
    background: linear-gradient(90deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00));
    border: 1px solid rgba(255,255,255,0.02);
  }
  .inst-thumb{ width:84px; height:84px; border-radius:10px; overflow:hidden; background:var(--glass); display:flex;align-items:center;justify-content:center }
  .inst-body{ flex:1 }
  .inst-body h4{ margin:0; font-size:15px }
  .inst-body p{ margin:6px 0 8px; color:var(--muted); font-size:13px }

  .inst-actions{ display:flex; gap:8px; flex-wrap:wrap }
  .btn{
    background:transparent;
    color:var(--text);
    border:1px solid rgba(255,255,255,0.06);
    padding:8px 10px;
    border-radius:10px;
    font-size:13px;
  }

  /* GALLERY GRID */
  .gallery-grid{
    display:grid;
    gap:6px;
    grid-template-columns: repeat(3, 1fr);
  }
  .gallery-item{ position:relative; padding-top:66%; overflow:hidden; border-radius:10px; background:var(--glass) }
  .gallery-item img, .gallery-item video{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; }

  /* LIGHTBOX */
  .lightbox{
    position:fixed; inset:0; display:none; align-items:center; justify-content:center;
    background:rgba(2,4,8,0.86); z-index:1200;
    padding:20px;
  }
  .lightbox.show{ display:flex }
  .lightbox-media{ max-width:920px; width:100%; max-height:90vh; border-radius:12px; overflow:hidden; background:#000; }
  .lightbox-close{ position:absolute; top:20px; right:18px; color:var(--text); font-size:20px; }

  /* FOOTER */
  footer{ margin-top:18px; text-align:center; color:var(--muted); font-size:13px }

  /* EDIT PANEL (sliding) */
  .edit-panel{
    position:fixed;
    left:12px;
    right:12px;
    bottom:12px;
    background:linear-gradient(180deg,#071324,#05101a);
    border-radius:12px;
    padding:12px;
    display:none;
    z-index:1100;
    border:1px solid rgba(255,255,255,0.03);
  }
  .edit-panel.show{ display:block }
  .row{ display:flex; gap:8px; margin-top:8px; align-items:center }
  input[type="text"]{ flex:1; padding:8px; border-radius:8px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:var(--text) }
  input[type="file"]{ color:var(--muted); font-size:13px }
  small.hint{ color:var(--muted); display:block; margin-top:6px; font-size:12px }

  /* responsive tweaks */
  @media(min-width:720px){
    body{ padding:24px }
    .hero{ gap:20px; }
    .hero-media{ width:160px;height:160px }
    .gallery-grid{ grid-template-columns: repeat(4, 1fr) }
  }
</style>
</head>
<body>
<div class="container">

  <!-- HEADER -->
  <header>
    <!-- LOGO: Ø¨Ø±Ø§ÛŒ Ø¹ÙˆØ¶ Ú©Ø±Ø¯Ù† Ù„ÙˆÚ¯Ùˆ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ src Ø±Ø§ ØªØºÛŒÛŒØ± Ø¯Ù‡ÛŒØ¯ ÛŒØ§ Ø§Ø² Ø¯Ú©Ù…Ù‡ ÙˆÛŒØ±Ø§ÛŒØ´ ÙØ§ÛŒÙ„ Ø¬Ø¯ÛŒØ¯ Ø¢Ù¾Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯ -->
    <img id="logo" src="logo.png" alt="Ø¢ÙˆØ§ÛŒ Ø²Ø±ÛŒØ§Ø¨ Ù„ÙˆÚ¯Ùˆ">
    <div class="brand">
      <h1>Ø¢ÙˆØ§ÛŒ Ø²Ø±ÛŒØ§Ø¨</h1>
      <p>Ù…ÙˆØ³Ø³Ù‡Ù” Ù…ÙˆØ³ÛŒÙ‚ÛŒ â€” Ø¢Ú©Ø§Ø¯Ù…ÛŒ Ú¯ÛŒØªØ§Ø± Ùˆ Ø¢ÙˆØ§Ø²</p>
    </div>
    <button id="editBtn" class="edit-toggle">ÙˆÛŒØ±Ø§ÛŒØ´</button>
  </header>

  <!-- HERO -->
  <div class="hero">
    <div class="hero-left">
      <h2>ØªØ§Ø±ÛŒØ®Ú†Ù‡ Ùˆ ØªØ­Ù„ÛŒÙ„ Ø³Ø§Ø² Ú¯ÛŒØªØ§Ø±</h2>
      <div class="lead text-muted" id="shortIntro">
        Ø³Ø§Ø² Ú¯ÛŒØªØ§Ø± Ø§Ø² Ø±ÛŒØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ø´Ø±Ù‚ÛŒ ØªØ§ Ù‚Ù„Ø¨ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø¬Ù‡Ø§Ù†ÛŒ â€” Ù¾ÛŒØ¯Ø§ÛŒØ´ ØªØ§Ø±ÛŒØ®ÛŒ Ú¯ÛŒØªØ§Ø± Ùˆ Ù†Ù‚Ø´ Ø²Ø±ÛŒØ§Ø¨ Ø¯Ø± ØªØ­ÙˆÙ„ Ú¯ÛŒØªØ§Ø±. 
        Ø§Ø³Ú©Ø±ÙˆÙ„ Ú©Ù† ØªØ§ Ù‡Ø± Ø¨Ø®Ø´ Ø±Ø§ Ø²ÛŒØ¨Ø§ØªØ± Ø¨Ø¨ÛŒÙ†ÛŒ Ùˆ Ú¯Ø§Ù„Ø±ÛŒâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø§Ø² Ú©Ù†ÛŒ.
      </div>
    </div>
    <div class="hero-media">
      <!-- Ù†Ù…ÙˆÙ†Ù‡Ù” ÙˆÛŒØ¯Ø¦Ùˆ/Ø¹Ú©Ø³ Ù…ÛŒØªÙˆØ§Ù†Ø¯ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ø§Ø´Ø¯ -->
      <img id="heroMedia" src="" alt="hero media" style="width:100%;height:100%;object-fit:cover;display:none"/>
      <svg id="heroSVG" width="80" height="80" viewBox="0 0 24 24" fill="none" style="opacity:0.6">
        <rect width="24" height="24" rx="6" fill="#0e1b28" />
        <path d="M6 9h12M6 13h8" stroke="#d0a75a" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
    </div>
  </div>

  <!-- ABOUT WITH DETAILED TEXT (from user's description) -->
  <section class="card" id="about">
    <h3>ğŸ“œ Ù¾ÛŒØ¯Ø§ÛŒØ´ ØªØ§Ø±ÛŒØ®ÛŒ Ú¯ÛŒØªØ§Ø±</h3>
    <div class="text-muted">
      <p>
        Ø³Ø§Ø² Ú¯ÛŒØªØ§Ø±ØŒ ÛŒÚ©ÛŒ Ø§Ø² Ù¾Ø±Ù†ÙÙˆØ°ØªØ±ÛŒÙ† Ø³Ø§Ø²Ù‡Ø§ÛŒ Ø²Ù‡ÛŒ Ø¯Ø± ØªØ§Ø±ÛŒØ® Ù…ÙˆØ³ÛŒÙ‚ÛŒØŒ Ø±ÛŒØ´Ù‡â€ŒØ§ÛŒ Ú†Ù†Ø¯ Ù‡Ø²Ø§Ø± Ø³Ø§Ù„Ù‡ Ø¯Ø§Ø±Ø¯. Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ø¢Ù† Ø¯Ø± ØªÙ…Ø¯Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø³ØªØ§Ù†ÛŒ Ù…Ø§Ù†Ù†Ø¯ Ø³ÙˆÙ…Ø±ØŒ
        Ù…ØµØ±ØŒ Ø§ÛŒØ±Ø§Ù† Ùˆ ÛŒÙˆÙ†Ø§Ù† Ø¯ÛŒØ¯Ù‡ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯. Ø¯Ø± Ø§ÛŒØ±Ø§Ù†ØŒ Ø³Ø§Ø²Ù‡Ø§ÛŒÛŒ Ú†ÙˆÙ† ØªÙ†Ø¨ÙˆØ± Ùˆ Ø¨Ø±Ø¨Ø· Ø´Ø¨Ø§Ù‡Øªâ€ŒÙ‡Ø§ÛŒÛŒ Ø³Ø§Ø®ØªØ§Ø±ÛŒ Ø¨Ø§ Ú¯ÛŒØªØ§Ø± Ø¯Ø§Ø´ØªÙ‡â€ŒØ§Ù†Ø¯. Ø¨Ø§ Ú¯Ø³ØªØ±Ø´ ØªÙ…Ø¯Ù† Ø§Ø³Ù„Ø§Ù…ÛŒ Ø¨Ù‡ ØºØ±Ø¨ØŒ
        Ø§ÛŒÙ† Ø³Ø§Ø²Ù‡Ø§ Ø¨Ù‡ Ø§Ù†Ø¯Ù„Ø³ Ø±Ø§Ù‡ ÛŒØ§ÙØªÙ†Ø¯ Ùˆ Ø¨Ø§ ÙØ±Ù‡Ù†Ú¯ Ø§Ø±ÙˆÙ¾Ø§ÛŒÛŒ ØªÙ„ÙÛŒÙ‚ Ø´Ø¯Ù†Ø¯. 
      </p>

      <h4 style="color:var(--brand-gold);margin-top:8px">ğŸª• Ù†Ù‚Ø´ Ø²Ø±ÛŒØ§Ø¨ Ø¯Ø± ØªØ­ÙˆÙ„ Ú¯ÛŒØªØ§Ø±</h4>
      <p>
        Ø²Ø±ÛŒØ§Ø¨ (Ø§Ø¨ÙˆØ§Ù„Ø­Ø³Ù† Ø¹Ù„ÛŒ Ø§Ø¨Ù† Ù†Ø§ÙØ¹)ØŒ Ù…ÙˆØ³ÛŒÙ‚ÛŒØ¯Ø§Ù† Ù‚Ø±Ù† Ù†Ù‡Ù…ØŒ Ø¨Ø§ Ø§ÙØ²ÙˆØ¯Ù† Ø³ÛŒÙ… Ù¾Ù†Ø¬Ù…ØŒ Ù¾Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ ØªØ­ÙˆÙ„ Ø±Ø§ Ú¯Ø°Ø§Ø´Øª Ùˆ ÑˆĞºĞ¾Ğ»Ñƒ Ù…ÙˆØ³ÛŒÙ‚ÛŒ Ø¯Ø± Ù‚Ø±Ø·Ø¨Ù‡ ØªØ£Ø³ÛŒØ³ Ú©Ø±Ø¯. 
        Ø§Ùˆ Ø³Ø¨Ú©â€ŒÙ‡Ø§ÛŒ Ø´Ø±Ù‚ÛŒ Ø±Ø§ Ø¨Ù‡ ØºØ±Ø¨ Ù…Ù†ØªÙ‚Ù„ Ú©Ø±Ø¯ Ùˆ Ø²Ù…ÛŒÙ†Ù‡â€ŒØ³Ø§Ø² Ù¾ÛŒØ¯Ø§ÛŒØ´ Ú¯ÛŒØªØ§Ø± ÙÙ„Ø§Ù…Ù†Ú©Ùˆ Ø´Ø¯.
      </p>

      <h4 style="color:var(--brand-gold);margin-top:8px">ğŸ¶ Ú†Ø±Ø§ Ú¯ÛŒØªØ§Ø± Ù…Ù‡Ù… Ø§Ø³ØªØŸ</h4>
      <ul style="padding-left:18px;color:var(--muted)">
        <li>ØªÙ†ÙˆØ¹ Ø³Ø¨Ú©â€ŒÙ‡Ø§: Ø§Ø² Ú©Ù„Ø§Ø³ÛŒÚ© ØªØ§ Ø±Ø§Ú© Ùˆ ÙÙ„Ø§Ù…Ù†Ú©Ùˆ.</li>
        <li>Ø§Ø¨Ø²Ø§Ø± Ø¨ÛŒØ§Ù† ÙØ±Ø¯ÛŒ: Ù‡Ù…â€ŒØ²Ù…Ø§Ù† Ø¢Ú©ÙˆØ±Ø¯ Ùˆ Ù…Ù„ÙˆØ¯ÛŒ.</li>
        <li>Ø¯Ø³ØªØ±Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ùˆ Ù…Ø­Ø¨ÙˆØ¨ÛŒØª Ø¬Ù‡Ø§Ù†ÛŒ.</li>
        <li>Ù†Ù‚Ø´ ÙØ±Ù‡Ù†Ú¯ÛŒ Ùˆ Ø§Ø¬ØªÙ…Ø§Ø¹ÛŒ Ø¯Ø± Ø³Ø¨Ú©â€ŒÙ‡Ø§ÛŒ ÙÙˆÙ„Ú©Ù„ÙˆØ± Ùˆ Ø§Ø¹ØªØ±Ø§Ø¶ÛŒ.</li>
      </ul>

      <h4 style="color:var(--brand-gold);margin-top:8px">ğŸŒŸ Ø¨Ø²Ø±Ú¯Ø§Ù† Ú¯ÛŒØªØ§Ø±</h4>
      <div class="text-muted">
        <strong>Ø¢Ù†Ø¯Ø±Ø³ Ø³Ú¯ÙˆÙˆÛŒØ§</strong> â€” Ú©Ù„Ø§Ø³ÛŒÚ©Ø› <strong>Ù¾Ø§Ú©Ùˆ Ø¯Ù„ÙˆØ³ÛŒØ§</strong> â€” ÙÙ„Ø§Ù…Ù†Ú©ÙˆØ› <strong>Ø¬ÛŒÙ…ÛŒ Ù‡Ù†Ø¯Ø±ÛŒÚ©Ø³</strong> â€” Ø±Ø§Ú©Ø›
        <strong>Ø¬Ø§Ù† ÙˆÛŒÙ„ÛŒØ§Ù…Ø²</strong> â€” Ú©Ù„Ø§Ø³ÛŒÚ©Ø› <strong>Ø§Ø±ÛŒÚ© Ú©Ù„Ù¾ØªÙˆÙ†</strong> â€” Ø¨Ù„ÙˆØ²/Ø±Ø§Ú©.
      </div>
    </div>
  </section>

  <!-- INSTRUCTORS -->
  <section class="card" id="instructors">
    <h3>Ø§Ø³Ø§ØªÛŒØ¯</h3>
    <div class="instructors" id="instructorList">
      <!-- Ø§Ø³ØªØ§Ø¯Ù‡Ø§ Ø¨Ø§ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ -->
    </div>
  </section>

  <!-- ARTISTS / YOUTH GALLERY -->
  <section class="card" id="youth">
    <h3>Ú¯Ø§Ù„Ø±ÛŒ Ù‡Ù†Ø± Ø¬ÙˆØ§Ù†</h3>
    <div id="youthGallery" class="gallery-grid"></div>
    <small class="hint">Ø¨Ø±Ø§ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¹Ú©Ø³ ÛŒØ§ ÙˆÛŒØ¯Ø¦Ùˆ ÙˆØ§Ø±Ø¯ Ø­Ø§Ù„Øª ÙˆÛŒØ±Ø§ÛŒØ´ Ø´ÙˆÛŒØ¯.</small>
  </section>

  <footer>
    Â© Ø¢Ú©Ø§Ø¯Ù…ÛŒ Ø¢ÙˆØ§ÛŒ Ø²Ø±ÛŒØ§Ø¨ â€” Ù‡Ù…Ù‡ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª
  </footer>
</div>

<!-- LIGHTBOX Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ Ø¨Ø²Ø±Ú¯ ØªØµØ§ÙˆÛŒØ± Ùˆ ÙˆÛŒØ¯Ø¦Ùˆ -->
<div id="lightbox" class="lightbox" aria-hidden="true">
  <button id="lbClose" class="lightbox-close">âœ•</button>
  <div class="lightbox-media" id="lbMedia"></div>
</div>

<!-- EDIT PANEL -->
<div id="editPanel" class="edit-panel" aria-hidden="true">
  <strong>Ø­Ø§Ù„Øª ÙˆÛŒØ±Ø§ÛŒØ´ â€” Ø§ÙØ²ÙˆØ¯Ù† / Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ†ÛŒ Ø±Ø³Ø§Ù†Ù‡</strong>
  <div class="row">
    <label style="font-size:13px;color:var(--muted)">Ù„ÙˆÚ¯Ùˆ (jpg/png):</label>
    <input id="logoFile" type="file" accept="image/*">
    <button class="btn" id="applyLogo">Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ</button>
  </div>

  <div class="row">
    <label style="font-size:13px;color:var(--muted)">Ø§ÙØ²ÙˆØ¯Ù† Ø¹Ú©Ø³/ÙˆÛŒØ¯Ø¦Ùˆ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªØ§Ø¯:</label>
  </div>
  <div class="row">
    <select id="selectInstructor" style="padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text)">
      <!-- options dynamical -->
    </select>
    <input id="mediaURL" type="text" placeholder="Ø¢Ø¯Ø±Ø³ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¹Ú©Ø³ ÛŒØ§ ÙˆÛŒØ¯Ø¦Ùˆ (https://...)" />
    <button id="addMediaBtn" class="btn">Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†</button>
  </div>
  <div class="row">
    <input id="mediaFile" type="file" accept="image/*,video/*">
    <small class="hint">Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ ÙØ§ÛŒÙ„ Ø±Ø§ Ø§Ø² Ú¯ÙˆØ´ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ â€” ÙØ§ÛŒÙ„ Ø¯Ø± Ù‡Ù…Ø§Ù† Ø¬Ù„Ø³Ù‡ Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒÛŒØ§Ø¨Ø¯ (Ø°Ø®ÛŒØ±Ù‡ Ù…Ø­Ù„ÛŒ).</small>
  </div>

  <div class="row" style="justify-content:space-between;margin-top:10px">
    <button id="closeEdit" class="btn">Ø¨Ø³ØªÙ†</button>
    <button id="resetData" class="btn">Ø±ÛŒØ³Øª Ù†Ù…ÙˆÙ†Ù‡</button>
  </div>
</div>

<script>
/* ---------- DATA: Ù†Ù…ÙˆÙ†Ù‡ Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ø§ Ø¯Ùˆ Ø§Ø³ØªØ§Ø¯ ---------- */
const data = {
  instructors: [
    {
      id: 'soheil',
      name: 'Ø§Ø³ØªØ§Ø¯ Ø³Ù‡ÛŒÙ„ Ù…Ø¹Ù†ÙˆÛŒ',
      role: 'Ù…Ø±Ø¨ÛŒ Ú¯ÛŒØªØ§Ø±',
      thumb: '', // Ù…Ø³ÛŒØ± Ø¹Ú©Ø³ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ (Ø¯Ø± ØµÙˆØ±Øª Ø®Ø§Ù„ÛŒØŒ Ø±Ù†Ú¯ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯)
      media: [
        // Ù†Ù…ÙˆÙ†Ù‡Ù” URLâ€ŒÙ‡Ø§ â€” Ø¨Ø¹Ø¯Ø§ Ù…ÛŒØªÙˆÙ†ÛŒ Ø§Ø² Ù¾Ù†Ù„ ÙˆÛŒØ±Ø§ÛŒØ´ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒ
        // {type:'image', src:'https://...'},
      ]
    },
    {
      id: 'faride',
      name: 'Ø§Ø³ØªØ§Ø¯ ÙØ±ÛŒØ¯Ù‡ Ø¹Ù†Ø§ÛŒØªÛŒ',
      role: 'Ù…Ø±Ø¨ÛŒ Ø¢ÙˆØ§Ø²',
      thumb: '',
      media: []
    }
  ],
  youthGallery: []
};

/* ---------- UI REFERENCE ---------- */
const instructorList = document.getElementById('instructorList');
const selectInstructor = document.getElementById('selectInstructor');
const editBtn = document.getElementById('editBtn');
const editPanel = document.getElementById('editPanel');
const addMediaBtn = document.getElementById('addMediaBtn');
const mediaURL = document.getElementById('mediaURL');
const mediaFile = document.getElementById('mediaFile');
const logoImg = document.getElementById('logo');
const logoFile = document.getElementById('logoFile');
const applyLogo = document.getElementById('applyLogo');
const youthGallery = document.getElementById('youthGallery');
const resetData = document.getElementById('resetData');

/* ---------- RENDERING ---------- */
function renderInstructors(){
  instructorList.innerHTML = '';
  selectInstructor.innerHTML = '';

  data.instructors.forEach(inst=>{
    // option for edit panel
    let opt = document.createElement('option');
    opt.value = inst.id;
    opt.textContent = inst.name;
    selectInstructor.appendChild(opt);

    // instructor card
    const card = document.createElement('div');
    card.className = 'instructor';
    const thumb = document.createElement('div'); thumb.className='inst-thumb';
    if(inst.thumb){
      const img = document.createElement('img'); img.src=inst.thumb; img.alt=inst.name;
      img.style.width='100%'; img.style.height='100%'; img.style.objectFit='cover';
      thumb.appendChild(img);
    } else {
      thumb.innerHTML = `<div style="text-align:center;color:var(--muted);font-size:13px; padding:8px">Ø¹Ú©Ø³ ${inst.name}</div>`;
    }

    const body = document.createElement('div'); body.className = 'inst-body';
    const h = document.createElement('h4'); h.textContent = inst.name;
    const p = document.createElement('p'); p.textContent = inst.role;
    const actions = document.createElement('div'); actions.className='inst-actions';

    const viewBtn = document.createElement('button'); viewBtn.className='btn'; viewBtn.textContent='Ú¯Ø§Ù„Ø±ÛŒ';
    viewBtn.onclick = ()=> openGallery(inst.id);

    const addBtn = document.createElement('button'); addBtn.className='btn'; addBtn.textContent='Ø§ÙØ²ÙˆØ¯Ù† Ø±Ø³Ø§Ù†Ù‡';
    addBtn.onclick = ()=> {
      editPanel.classList.add('show'); editPanel.setAttribute('aria-hidden','false');
      selectInstructor.value = inst.id;
    };

    actions.appendChild(viewBtn); actions.appendChild(addBtn);
    body.appendChild(h); body.appendChild(p); body.appendChild(actions);
    card.appendChild(thumb); card.appendChild(body);
    instructorList.appendChild(card);
  });
  renderYouthGallery();
}

function renderYouthGallery(){
  youthGallery.innerHTML='';
  const items = data.youthGallery;
  if(items.length===0){
    youthGallery.innerHTML = `<div style="color:var(--muted);font-size:13px">Ú¯Ø§Ù„Ø±ÛŒ Ù‡Ù†Ø± Ø¬ÙˆØ§Ù† Ø®Ø§Ù„ÛŒ Ø§Ø³Øª â€” Ø¨Ø§ Ø¯Ú©Ù…Ù‡Ù” ÙˆÛŒØ±Ø§ÛŒØ´ Ø¹Ú©Ø³ ÛŒØ§ ÙˆÛŒØ¯Ø¦Ùˆ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯.</div>`;
    return;
  }
  items.forEach(it=>{
    const div = document.createElement('div'); div.className='gallery-item';
    if(it.type==='image'){
      const img = document.createElement('img'); img.src=it.src; img.alt='';
      img.onclick = ()=> showLightbox('image', it.src);
      div.appendChild(img);
    } else {
      const vid = document.createElement('video'); vid.src=it.src; vid.controls=true;
      vid.onclick = ()=> showLightbox('video', it.src);
      div.appendChild(vid);
    }
    youthGallery.appendChild(div);
  });
}

/* ---------- GALLERY PER INSTRUCTOR (LIGHTBOX) ---------- */
function openGallery(instId){
  const inst = data.instructors.find(i=>i.id===instId);
  if(!inst) return;
  // Ø³Ø§Ø®Øª lightbox Ù…Ø­ØªÙˆØ§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªØ§Ø¯
  const lb = document.getElementById('lightbox');
  const lbMedia = document.getElementById('lbMedia');
  lbMedia.innerHTML = `<div style="padding:12px;color:var(--text)"><h3 style="color:var(--brand-gold)">${inst.name} â€” Ú¯Ø§Ù„Ø±ÛŒ</h3></div>`;
  const grid = document.createElement('div');
  grid.style.display='grid'; grid.style.gridTemplateColumns='repeat(3,1fr)'; grid.style.gap='8px'; grid.style.padding='12px';
  if(inst.media.length===0){
    grid.innerHTML = `<div style="color:var(--muted);grid-column:'1/-1'">Ú¯Ø§Ù„Ø±ÛŒ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª â€” Ø¯Ø± Ø­Ø§Ù„Øª ÙˆÛŒØ±Ø§ÛŒØ´ Ø±Ø³Ø§Ù†Ù‡ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯.</div>`;
  } else {
    inst.media.forEach(m=>{
      const itm = document.createElement('div'); itm.style.borderRadius='8px'; itm.style.overflow='hidden'; itm.style.paddingTop='66%'; itm.style.position='relative';
      if(m.type==='image'){
        const img=document.createElement('img'); img.src=m.src; img.style.position='absolute'; img.style.inset=0; img.style.width='100%'; img.style.height='100%'; img.style.objectFit='cover';
        img.onclick=()=> showLightbox('image', m.src);
        itm.appendChild(img);
      } else {
        const vid=document.createElement('video'); vid.src=m.src; vid.controls=true; vid.style.position='absolute'; vid.style.inset=0; vid.style.width='100%'; vid.style.height='100%'; vid.style.objectFit='cover';
        vid.onclick=()=> showLightbox('video', m.src);
        itm.appendChild(vid);
      }
      grid.appendChild(itm);
    });
  }
  lbMedia.appendChild(grid);
  lb.classList.add('show'); lb.setAttribute('aria-hidden','false');
}
document.getElementById('lbClose').onclick = ()=> {
  const lb=document.getElementById('lightbox'); lb.classList.remove('show'); lb.setAttribute('aria-hidden','true');
}
function showLightbox(type, src){
  const lb=document.getElementById('lightbox'); const lbMedia=document.getElementById('lbMedia');
  lbMedia.innerHTML = '';
  if(type==='image'){
    const img=document.createElement('img'); img.src=src; img.style.width='100%'; img.style.height='100%'; img.style.objectFit='contain';
    lbMedia.appendChild(img);
  } else {
    const vid=document.createElement('video'); vid.src=src; vid.controls=true; vid.autoplay=true; vid.style.width='100%'; vid.style.height='100%';
    lbMedia.appendChild(vid);
  }
  lb.classList.add('show'); lb.setAttribute('aria-hidden','false');
}

/* ---------- EDIT PANEL ACTIONS ---------- */
editBtn.onclick = ()=> {
  editPanel.classList.toggle('show');
  const shown = editPanel.classList.contains('show');
  editPanel.setAttribute('aria-hidden', (!shown).toString());
};
document.getElementById('closeEdit').onclick = ()=> {
  editPanel.classList.remove('show');
  editPanel.setAttribute('aria-hidden','true');
};

/* Ø§ÙØ²ÙˆØ¯Ù† Ø±Ø³Ø§Ù†Ù‡ (Ø§Ø² URL ÛŒØ§ ÙØ§ÛŒÙ„) */
addMediaBtn.onclick = async ()=>{
  const instId = selectInstructor.value;
  const inst = data.instructors.find(i=>i.id===instId);
  if(!inst) return alert('Ø§Ø³ØªØ§Ø¯ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡');
  // Ø§Ú¯Ø± URL ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡
  const url = mediaURL.value.trim();
  if(url){
    const type = url.match(/\.(mp4|webm|ogg|mov)(\?.*)?$/i) ? 'video' : 'image';
    inst.media.push({type, src:url});
    mediaURL.value='';
    renderInstructors();
    return alert('Ø±Ø³Ø§Ù†Ù‡ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ (Ø§Ø² URL).');
  }
  // ÛŒØ§ ÙØ§ÛŒÙ„ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
  const f = mediaFile.files[0];
  if(f){
    const dataUrl = await fileToDataURL(f);
    const type = f.type.startsWith('video') ? 'video' : 'image';
    if(type==='image') data.youthGallery.push({type:'image', src:dataUrl});
    else data.youthGallery.push({type:'video', src:dataUrl});
    mediaFile.value='';
    renderInstructors();
    alert('ÙØ§ÛŒÙ„ Ù…Ø­Ù„ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ (ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¬Ù„Ø³Ù‡).');
    return;
  }
  alert('ÛŒÚ© URL ÛŒØ§ ÙØ§ÛŒÙ„ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.');
};

/* ØªØ¨Ø¯ÛŒÙ„ ÙØ§ÛŒÙ„ Ø¨Ù‡ dataURL Ø¬Ù‡Øª Ù†Ù…Ø§ÛŒØ´ Ù…Ø­Ù„ÛŒ */
function fileToDataURL(file){
  return new Promise((res,rej)=>{
    const r=new FileReader();
    r.onload=()=>res(r.result);
    r.onerror=()=>rej();
    r.readAsDataURL(file);
  });
}

/* Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù„ÙˆÚ¯Ùˆ Ø§Ø² ÙØ§ÛŒÙ„ */
applyLogo.onclick = async ()=>{
  const f = logoFile.files[0];
  if(!f) return alert('ÙØ§ÛŒÙ„ Ù„ÙˆÚ¯Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡');
  const d = await fileToDataURL(f);
  logoImg.src = d;
  alert('Ù„ÙˆÚ¯Ùˆ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø´Ø¯ (ÙØ§ÛŒÙ„ Ù…Ø­Ù„ÛŒ). Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø§Ø¦Ù…ÛŒØŒ ÙØ§ÛŒÙ„ Ø±Ø§ Ø¯Ø± Ú©Ù†Ø§Ø± index.html Ø°Ø®ÛŒØ±Ù‡ Ùˆ Ù…Ø³ÛŒØ± Ø±Ø§ Ø¹ÙˆØ¶ Ú©Ù†ÛŒØ¯.');
};

/* Ø±ÛŒØ³Øª Ù†Ù…ÙˆÙ†Ù‡Ù” Ø¯Ø§Ø¯Ù‡ */
resetData.onclick = ()=>{
  if(!confirm('Ø±ÛŒØ³Øª Ù†Ù…ÙˆÙ†Ù‡ â€” ØªÙ…Ø§Ù… Ø±Ø³Ø§Ù†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø­Ù„ÛŒ Ø§Ø² Ø¨ÛŒÙ† Ù…ÛŒâ€ŒØ±ÙˆØ¯. Ø§Ø¯Ø§Ù…Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡ÛŒØŸ')) return;
  data.instructors.forEach(i=>i.media=[]);
  data.youthGallery=[];
  renderInstructors();
};

/* ---------- INIT: Ù†Ù…ÙˆÙ†Ù‡Ù” Ø§ØµÙ„ÛŒ (Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒ Ø§ÛŒÙ†Ø¬Ø§ URL Ù‡Ø§ Ø±Ø§ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒ) ---------- */
/* Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒ ØªØµØ§ÙˆÛŒØ± Ù†Ù…ÙˆÙ†Ù‡â€ŒØ§ÛŒ Ø¯Ø± Ø®ÙˆØ¯ ÙØ§ÛŒÙ„ Ù‚Ø±Ø§Ø± Ø¨Ø¯ÛŒØŒ Ù…ÛŒØªÙˆØ§Ù†ÛŒ Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ Ø§ÛŒÙ†ØªØ±Ù†ØªÛŒ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ø°Ø§Ø±ÛŒ. */
data.instructors[0].media.push(
  // Ù…Ø«Ø§Ù„: {type:'image', src:'https://...'},
);
renderInstructors();

/* ---------- LIGHTWEIGHT SCROLL GUITAR SOUND (Web Audio API) ---------- */
let audioCtx = null;
let lastScrollY = window.scrollY;
let lastTrigger = 0;

function ensureAudio(){
  if(!audioCtx){
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    // resume on first user interaction (some Ù…ÙˆØ¨Ø§ÛŒÙ„â€ŒÙ‡Ø§ Ù†ÛŒØ§Ø² Ø¯Ø§Ø±Ù†Ø¯)
    const resume = ()=> {
      if(audioCtx.state === 'suspended') audioCtx.resume();
      window.removeEventListener('touchstart', resume);
      window.removeEventListener('click', resume);
    };
    window.addEventListener('touchstart', resume, {once:true});
    window.addEventListener('click', resume, {once:true});
  }
}

/* Ø³Ø§Ø®Øª ÛŒÚ© "Ù¾Ù„Ø§Ú©" Ø³Ø§Ø¯Ù‡ Ø´Ø¨ÛŒÙ‡ Ú¯ÛŒØªØ§Ø± Ø¨Ø§ oscillator + envelope + filter */
function pluckNote(freq){
  ensureAudio();
  if(!audioCtx) return;
  const now = audioCtx.currentTime;
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  const filter = audioCtx.createBiquadFilter();
  filter.type = 'lowpass';
  filter.frequency.value = 3000;

  // ØªØºÛŒÛŒØ±Ø§Øª Ø³Ø±ÛŒØ¹ Ùˆ Ú©ÙˆÚ†Ú©ÛŒ Ø¨Ø±Ø§ÛŒ Ø·Ø¨ÛŒØ¹ÛŒâ€ŒØªØ± Ø´Ø¯Ù† ØµØ¯Ø§
  osc.type = 'sawtooth';
  osc.frequency.value = freq * (1 + (Math.random()-0.5)*0.02);

  gain.gain.setValueAtTime(0.0001, now);
  gain.gain.exponentialRampToValueAtTime(0.7, now+0.01);
  gain.gain.exponentialRampToValueAtTime(0.0001, now+1.6);

  filter.frequency.setValueAtTime(3000, now);
  filter.frequency.exponentialRampToValueAtTime(500, now+1.4);

  osc.connect(filter);
  filter.connect(gain);
  gain.connect(audioCtx.destination);
  osc.start(now);
  osc.stop(now+1.8);
}

/* Ù‡Ù†Ú¯Ø§Ù… Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ù‡ Ù¾Ø§ÛŒÛŒÙ† ÛŒÚ© Ù†Øª Ù¾Ø®Ø´ Ú©Ù† â€” debounce Ø³Ø§Ø¯Ù‡ */
window.addEventListener('scroll', ()=>{
  const y = window.scrollY;
  const now = Date.now();
  if(now - lastTrigger < 160) { lastScrollY = y; return; } // Ù…Ø­Ø¯ÙˆØ¯Ú©Ù†Ù†Ø¯Ù‡ ÙØ±Ø§ÙˆØ§Ù†ÛŒ
  if(y > lastScrollY + 6){ // Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ù‡ Ù¾Ø§ÛŒÛŒÙ†
    // Ù†Øª Ø§Ù†ØªØ®Ø§Ø¨ÛŒ Ø§Ø² Ù…Ø¬Ù…ÙˆØ¹Ù‡â€ŒØ§ÛŒ Ø§Ø² Ù†Øªâ€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ø®ØªÙ„Ø§Ù ØªÙÙ†
    const notes = [196, 220, 246.94, 261.63, 293.66]; // G A B C D ØªÙ‚Ø±ÛŒØ¨ÛŒ
    const n = notes[Math.floor(Math.random()*notes.length)];
    pluckNote(n);
    lastTrigger = now;
  }
  lastScrollY = y;
});

/* ---------- Ú©ÙˆÚ†Ú©: resume audio on touch/click for mobile ---------- */
window.addEventListener('touchstart', ()=> { if(audioCtx && audioCtx.state==='suspended') audioCtx.resume(); }, {once:true});
window.addEventListener('click', ()=> { if(audioCtx && audioCtx.state==='suspended') audioCtx.resume(); }, {once:true});

/* ---------- BONUS: Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù„ÙˆÚ¯Ùˆ Ø§Ø² Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª (Ù…Ø«Ø§Ù„) ---------- */
/* Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒ Ù„ÙˆÚ¯Ùˆ Ø±Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ url Ø¯Ø± Ú©Ø¯ Ø«Ø§Ø¨Øª Ú©Ù†ÛŒØŒ Ø§ÛŒÙ†Ø¬Ø§ Ù…Ù‚Ø¯Ø§Ø± Ø¨Ú¯Ø°Ø§Ø±:
   logoImg.src = 'https://example.com/your-logo.png';
*/

/* ---------- EVENT: Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø±Ø³Ø§Ù†Ù‡ Ø¨Ù‡ Ú¯Ø§Ù„Ø±ÛŒ Ú©Ù„ (Ø¨Ø±Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡) ---------- */
/* Ø¯Ø± Ø§ÛŒÙ† Ù†Ø³Ø®Ù‡ ÙˆÙ‚ØªÛŒ ÙØ§ÛŒÙ„ Ù…Ø­Ù„ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ø¢Ù† Ø±Ø§ Ø¨Ù‡ youthGallery Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…. */
mediaFile.addEventListener('change', async (e)=>{
  const f = e.target.files[0];
  if(!f) return;
  const d = await fileToDataURL(f);
  const type = f.type.startsWith('video') ? 'video' : 'image';
  data.youthGallery.push({type, src:d});
  renderInstructors();
});

/* ---------- Ø¯Ø³ØªØ±Ø³ÛŒ Ø³Ø±ÛŒØ¹: Ø§Ú¯Ø± Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒ Ù„ÙˆÚ¯ÙˆÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ ØªØµÙˆÛŒØ±ÛŒ Ú©Ù‡ ÙØ±Ø³ØªØ§Ø¯ÛŒ Ø¨Ø§Ø´Ø¯
   Ù†Ø§Ù… ÙØ§ÛŒÙ„ Ù„ÙˆÚ¯Ùˆ Ø±Ø§ Ø¨Ù‡ Ù†Ø§Ù… ÙØ§ÛŒÙ„ ØªØµÙˆÛŒØ±Øª (Ù…Ø«Ù„Ø§Ù‹ logo.png) ØªØºÛŒÛŒØ± Ø¨Ø¯Ù‡ ÛŒØ§ Ù…Ø³ÛŒØ± Ú©Ø§Ù…Ù„ Ø¨Ú¯Ø°Ø§Ø±ÛŒ.
   Ù…Ø«Ø§Ù„: logoImg.src = 'assets/zaryab-logo.png';
*/

/* ---------- Ø¯Ø±ÛŒØ§ÙØª Ù…Ø­Ù„ÛŒ ÙØ§ÛŒÙ„ Ùˆ Ù†Ù…Ø§ÛŒØ´ Ø¢Ù†ÛŒ: Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯ ---------- */
</script>
</body>
</html>
